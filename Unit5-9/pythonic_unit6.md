- 모듈 : 파이썬 정의와 문장들을 담고 있는 파일. 확장자 .py, 모듈의 이름은 전역변수 __name__으로 제공됨
- 모듈 이름을 사용해 함수들을 액세스 할 수 있음

### 1. 모듈 더 보기

- 모듈은 함수 정의와 실행 가능한 문장들도 포함할 수 있다. 모듈을 초기화하는데 사용됨
- 각 모듈은 자신만의 이름 공간을 가짐. 모듈에서 정의된 함수들의 전역 이름 공간으로 사용
- 모듈은 다른 모듈을 import 할 수 있음

  

```python
from fibo import fib, fib2
# 모듈에 들어있는 이름을 직접 import
from fibo import *
# 모듈이 정의하는 모든 이름을 import ( _ 로 시작하는 것들 제외)
from fibo as fib
fib.fib(500)
# 모듈 이름 다음에 as 가 올 때 as 다음의 이름을 임포트한 모듈에 직접 연결
from fibo import fib as fibonacci
fibonacci(500)
# 위 처럼 쓰기도 함 
```

- 각 모듈은 인터프리터 세션마다 한 번만 임포트 됨. 모듈 수정 시 인터프리터 다시 시작해야함

- 모듈을 실행하면 모듈에 있는 코드는 그것을 임포트할 때 처럼 실행됨. __name__은 “__main__”로 설정 됨

```python
if __name__ == "__main__":
    import sys
    fib(int(sys.argv[1]))
```

- 위 코드를 모듈 끝에 붙여 스크립트로도 사용될 수 있도록 만들 수 있음
- “메인” 파일로 실행될 때만 명령행을 파싱하는 코드가 실행되기 때문

- 모듈을 import 할 때 내장 모듈 → sys.path 순서대로 디렉터리를 검색
- 스크립트 디렉터리가 가장 우선순위 높음
- 같은 이름의 파일이 있으면 표준 라이브러리를 덮어

- 파이썬은 모듈 로딩 속도를 높이기 위해 컴파일된 바이트코드(.pyc)를 캐시함 __pycache__
- 직접 실행한 파일과 소스 파일이 없는 pyc 경우 캐시 검사 안함
- compileall 모듈 → 디렉터리 전체 .py 에 .pyc 미리 생성

### 2. 표준 모듈들

- 어떤 모듈들은 인터프리어테 내장됨
- sys 모듈
    - sys.ps1와 sys.ps2는 기본과 보조 프롬프트로 사용되는 문자열을 정의함
    - sys.path 는 인터프리터의 모듈 검색 경로를 결정하는 문자열들의 리스트

### 3. dir() 함수

- 내장 함수, 모듈이 정의하는 이름들을 찾는 데 사용

```python
import fibo, sys
dir(fibo)
['__name__', 'fib', 'fib2']
dir(sys)
['__breakpointhook__', '__displayhook__', '__doc__', '__excepthook__',
 '__interactivehook__', '__loader__', '__name__', '__package__', '__spec__',
... 생략...]
 
# 인자가 없으면 dir()는 현재 정의한 이름들을 나열
a = [1, 2, 3, 4, 5]
import fibo
fib = fibo.fib
dir()
['__builtins__', '__name__', 'a', 'fib', 'fibo', 'sys']
```

- dir() 은 내장 함수와 변수들의 이름을 나열하지 않음 → 표준 모듈 builtins 에 정의

### 4. 패키지

- 점으로 구분된 모듈 이름, 모듈 이름 공간을 구조화 하는 방법
- 파이썬이 디렉터리를 패키지 취급하게 만들기 위해서 __init__.py 파일이 필요하다. 이렇게하면 string 처럼 흔히 쓰는 이름의 디렉터리가 의도하지 않게 모듈검색 경로 뒤에 등장하는 올바른 모듈들을 가리는 일을 방지함
- 패키지 사용자는 패키지로부터 개별 모듈을 import 할 수 있음

- import * : 시간이 오래 걸리고 서브 모듈을 import 함에 따라 원하지 않는 부수적 효과가 발생할 수 있음
    - 패키지 색인을 명시적으로 제공하는 것이 해결책
    - __init__.py 코드가 __all__이라는 이름의 목록을제공하면 import 해야만 하는 모듈 이름들의 목록으로 받아들임
- 서브 모듈이 지역적으로 정의된 이름에 의해 가려질 수 있음( 지역적으로 정해진 함수 이름 같은거에 )

```python
from . import echo
from .. import formats
from ..filters import equalizer
```

- 패키지가 서브 패키지들로 구조화될 때 이웃 패키지의 서브 모듈을 가리키는데 절대임포트를 사용할 수 있음

- __path__ 이것은 패키지의 __init__.py파일을 실행하기 전에, 디렉터리 이름을 포함하는 문자열의 시퀀스로 초기화 됨
    - 패키지 import → 디렉터리 찾음 → 디렉터리.__path__ 생성 → 디렉터리.__init__.py 실행
- 패키지에서 발견되는 모듈의 집합을 확장하는 데 사용